<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PMæ±‡æŠ¥å€’è®¡æ—¶ & å‹åŠ›è‡ªæ„ˆç«™</title>
    <style>
        /* --- CSS æ ·å¼åŒºåŸŸ --- */
        :root {
            --primary-color: #0052d9; /* ç§‘æŠ€è“ */
            --healing-color: #2ba471; /* æ²»æ„ˆç»¿ */
            --bg-color: #f5f7fa;
            --card-bg: #ffffff;
            --text-color: #333;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            box-sizing: border-box;
        }

        .container {
            background-color: var(--card-bg);
            border-radius: 16px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            width: 100%;
            max-width: 900px;
            display: flex;
            flex-wrap: wrap; /* å…è®¸æ¢è¡Œï¼Œå®ç°å“åº”å¼ */
        }

        /* å·¦ä¾§å‹åŠ›åŒº */
        .pressure-zone {
            flex: 1 1 400px; /* åŸºç¡€å®½åº¦400pxï¼Œå¯ä¼¸ç¼© */
            padding: 40px;
            border-right: 1px solid #eee;
        }

        /* å³ä¾§è‡ªæ„ˆåŒº */
        .healing-zone {
            flex: 1 1 300px; /* åŸºç¡€å®½åº¦300pxï¼Œå¯ä¼¸ç¼© */
            padding: 40px;
            background-color: #f0f9f4; /* æ·¡æ·¡çš„ç»¿è‰²èƒŒæ™¯ */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        h2 {
            margin-top: 0;
            font-weight: 600;
            color: var(--text-color);
        }

        /* è¾“å…¥æ¡†æ ·å¼ */
        input[type="datetime-local"] {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            margin-bottom: 24px;
            box-sizing: border-box;
            font-family: inherit;
        }

        /* å€’è®¡æ—¶å¤§æ•°å­—æ ·å¼ */
        .countdown-display {
            font-size: 48px;
            font-weight: 700;
            color: var(--primary-color);
            font-variant-numeric: tabular-nums; /* ç­‰å®½æ•°å­—ï¼Œé˜²æ­¢è·³åŠ¨ */
            line-height: 1.2;
        }
        
        .countdown-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 5px;
        }

        /* å›è¡€æŒ‰é’®æ ·å¼ */
        .heal-btn {
            background-color: var(--healing-color);
            color: white;
            border: none;
            padding: 16px 32px;
            font-size: 18px;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(43, 164, 113, 0.3);
            transition: transform 0.1s, background-color 0.2s;
            width: 80%;
        }

        .heal-btn:hover {
            background-color: #238a5f;
        }

        .heal-btn:active {
            transform: scale(0.96);
        }

        /* é¼“åŠ±è¯­å±•ç¤ºåŒº */
        .quote-display {
            margin-top: 30px;
            min-height: 60px;
            font-size: 18px;
            color: #555;
            font-weight: 500;
            line-height: 1.5;
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .playing-indicator {
            color: var(--healing-color);
            font-size: 14px;
            margin-top: 10px;
            display: none; /* é»˜è®¤éšè— */
        }

        /* ç§»åŠ¨ç«¯é€‚é… */
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            .pressure-zone {
                border-right: none;
                border-bottom: 1px solid #eee;
                padding: 30px 20px;
            }
            .healing-zone {
                 padding: 30px 20px;
            }
            .countdown-display {
                font-size: 36px;
            }
        }
    </style>
</head>
<body>

    <div class="container">
        <section class="pressure-zone">
            <h2>â° æ±‡æŠ¥/Deadline å€’è®¡æ—¶</h2>
            <label for="deadline-picker" style="display:block; margin-bottom: 10px; color:#666;">é€‰æ‹©ä½ çš„â€œæ¸¡åŠ«â€æ—¶é—´ï¼š</label>
            <input type="datetime-local" id="deadline-picker">
            
            <div class="countdown-label">å‰©ä½™æ—¶é—´ï¼š</div>
            <div class="countdown-display" id="countdown-text">è¯·å…ˆé€‰æ‹©æ—¶é—´</div>
        </section>

        <section class="healing-zone">
            <h2>ğŸ§˜ PMå‹åŠ›è‡ªæ„ˆåŒº</h2>
            <p style="color: #666; margin-bottom: 30px;">ç„¦è™‘äº†ï¼Ÿç‚¹ä¸€ä¸‹ï¼Œéšæœºæ‰è½é¼“åŠ±æˆ–30ç§’å®é™ã€‚</p>
            <button class="heal-btn" id="heal-btn">âœ¨ ä¸€é”®å›è¡€</button>
            
            <div class="quote-display" id="quote-text"></div>
            <div class="playing-indicator" id="playing-indicator">ğŸµ æ­£åœ¨æ’­æ”¾30ç§’ç™½å™ªéŸ³ï¼Œæ·±å‘¼å¸...</div>

            <audio id="white-noise-player" preload="auto">
                <source src="https://actions.google.com/sounds/v1/ambiences/coffee_shop.ogg" type="audio/ogg">
                æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾ã€‚
            </audio>
        </section>
    </div>


    <script>
        /* --- JavaScript é€»è¾‘åŒºåŸŸ --- */

        // 1. å€’è®¡æ—¶é€»è¾‘
        const deadlineInput = document.getElementById('deadline-picker');
        const countdownText = document.getElementById('countdown-text');
        let countdownInterval;

        // è®¾ç½®é»˜è®¤æ—¶é—´ä¸ºæ˜å¤©ä¸Šåˆ10ç‚¹ï¼ˆæ–¹ä¾¿æ¼”ç¤ºï¼‰
        const tomorrow = new Date();
        tomorrow.setDate(tomorrow.getDate() + 1);
        tomorrow.setHours(10, 0, 0, 0);
        // æ ¼å¼åŒ–ä¸º datetime-local æ‰€éœ€çš„ YYYY-MM-DDTHH:mm æ ¼å¼
        const defaultTimeStr = tomorrow.toISOString().slice(0, 16);
        deadlineInput.value = defaultTimeStr;


        function startCountdown() {
            const deadline = new Date(deadlineInput.value).getTime();

            // æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨ï¼Œé¿å…å¤šä¸ªå®šæ—¶å™¨åŒæ—¶è¿è¡Œ
            if (countdownInterval) clearInterval(countdownInterval);

            // ç«‹å³æ‰§è¡Œä¸€æ¬¡ï¼Œé¿å…1ç§’å»¶è¿Ÿ
            updateTimer();

            countdownInterval = setInterval(updateTimer, 1000);

            function updateTimer() {
                const now = new Date().getTime();
                const distance = deadline - now;

                if (distance < 0) {
                    clearInterval(countdownInterval);
                    countdownText.innerHTML = "<span style='color: #d9534f; font-size: 32px;'>Deadline å·²åˆ°<br>å‹‡æ•¢é¢å¯¹ï¼</span>";
                    return;
                }

                // è®¡ç®—å¤©ã€æ—¶ã€åˆ†ã€ç§’
                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                // è¡¥é›¶å‡½æ•°ï¼Œä¾‹å¦‚æŠŠ 9 å˜æˆ 09
                const pad = (n) => n < 10 ? '0' + n : n;

                // æ›´æ–°æ˜¾ç¤ºç•Œé¢
                countdownText.innerHTML = `${pad(days)}å¤© ${pad(hours)}æ—¶ ${pad(minutes)}åˆ† ${pad(seconds)}ç§’`;
            }
        }

        // ç›‘å¬æ—¶é—´è¾“å…¥æ¡†çš„å˜åŒ–
        deadlineInput.addEventListener('change', startCountdown);
        // é¡µé¢åŠ è½½æ—¶å°è¯•å¯åŠ¨ä¸€æ¬¡
        if(deadlineInput.value) startCountdown();


        // 2. å‹åŠ›è‡ªæ„ˆé€»è¾‘
        const healBtn = document.getElementById('heal-btn');
        const quoteText = document.getElementById('quote-text');
        const audioPlayer = document.getElementById('white-noise-player');
        const playingIndicator = document.getElementById('playing-indicator');
        let audioTimer;

        // PM ä¸“å±é¼“åŠ±è¯­å½•
        const pmQuotes = [
            "è¿™ç‰ˆéœ€æ±‚é€»è¾‘é—­ç¯æ»¡åˆ†ï¼Œå¼€å‘çœ‹äº†éƒ½è¯´å¥½ï¼",
            "ä¸è¦æ…Œï¼ŒæŠ€æœ¯è¯„ä¼°è¯´è¿™ä¸ªåŠŸèƒ½å®ç°å¾ˆç®€å•ã€‚",
            "ä½ ä»Šå¤©ç”»çš„åŸå‹å›¾çœŸå¥½çœ‹ï¼Œåƒç´ çº§è¿˜åŸï¼",
            "è¿è¥è¯´ä¸Šæ¬¡ä¸Šçº¿çš„åŠŸèƒ½æ•°æ®æ¶¨äº†20%ï¼",
            "è€æ¿åˆšæ‰å¤¸ä½ çš„Roadmapè§„åˆ’å¾—éå¸¸æœ‰æˆ˜ç•¥çœ¼å…‰ã€‚",
            "æ²¡å…³ç³»ï¼Œéœ€æ±‚å˜æ›´å¾ˆæ­£å¸¸ï¼Œæˆ‘ä»¬æ˜¯æ‹¥æŠ±å˜åŒ–çš„PMï¼",
            "ä»Šå¤©çš„ä½ ä¹Ÿéå¸¸ä¸“ä¸šï¼Œæ°”åœºä¸¤ç±³å…«ï¼"
        ];

        healBtn.addEventListener('click', function() {
            // 50% æ¦‚ç‡éšæœºå†³å®šæ˜¯æ˜¾ç¤ºæ–‡å­—è¿˜æ˜¯æ’­æ”¾éŸ³é¢‘
            const isQuote = Math.random() > 0.5;

            // å…ˆé‡ç½®çŠ¶æ€ï¼šåœæ­¢éŸ³é¢‘ï¼Œæ¸…é™¤ä¹‹å‰çš„æ–‡å­—
            audioPlayer.pause();
            audioPlayer.currentTime = 0;
            playingIndicator.style.display = 'none';
            quoteText.textContent = '';
            if (audioTimer) clearTimeout(audioTimer);

            if (isQuote) {
                // --- æ˜¾ç¤ºé¼“åŠ±è¯­ ---
                const randomIndex = Math.floor(Math.random() * pmQuotes.length);
                // é‡æ–°è§¦å‘åŠ¨ç”»æŠ€å·§
                quoteText.style.animation = 'none';
                quoteText.offsetHeight; /* è§¦å‘é‡ç»˜ */
                quoteText.style.animation = 'fadeIn 0.5s ease-in-out';
                quoteText.textContent = pmQuotes[randomIndex];
            } else {
                // --- æ’­æ”¾ç™½å™ªéŸ³30ç§’ ---
                quoteText.textContent = ''; // æ¸…ç©ºæ–‡å­—
                playingIndicator.style.display = 'block'; // æ˜¾ç¤ºæ’­æ”¾æç¤º
                
                // å°è¯•æ’­æ”¾éŸ³é¢‘ï¼ˆéœ€è¦ç”¨æˆ·äº¤äº’æ‰èƒ½è§¦å‘ï¼Œè¿™é‡Œæ˜¯åœ¨ç‚¹å‡»äº‹ä»¶é‡Œï¼Œæ‰€ä»¥æ²¡é—®é¢˜ï¼‰
                audioPlayer.play().catch(e => {
                    console.error("éŸ³é¢‘æ’­æ”¾å¤±è´¥ï¼Œå¯èƒ½æ˜¯æµè§ˆå™¨ç­–ç•¥é™åˆ¶", e);
                    quoteText.textContent = "éŸ³é¢‘æ’­æ”¾å—é˜»ï¼Œä½†æ„¿ä½ å¿ƒä¸­æœ‰ç‰‡å®é™æµ·ã€‚";
                    playingIndicator.style.display = 'none';
                });

                // 30ç§’ååœæ­¢
                audioTimer = setTimeout(() => {
                    audioPlayer.pause();
                    audioPlayer.currentTime = 0;
                    playingIndicator.style.display = 'none';
                    quoteText.textContent = "âœ¨ 30ç§’å®é™æ—¶åˆ»ç»“æŸï¼Œç”µé‡å……æ»¡ï¼";
                }, 30000); // 30000 æ¯«ç§’ = 30 ç§’
            }
        });

    </script>
</body>
</html>